{"is_source_file": true, "format": "Python", "description": "This file contains FastAPI route handlers for managing subscriptions within a SaaS platform, including creating, renewing, cancelling, listing, aggregating, and exporting subscription data.", "external_files": ["src.api.models", "src.api.schemas", "src.api.auth", "fastapi", "sqlalchemy.orm", "sqlalchemy", "typing", "datetime", "csv", "io"], "external_methods": ["get_db", "rbac_required"], "published": ["assign_subscription", "renew_subscription", "cancel_subscription", "list_subscriptions_by_member", "list_subscriptions_by_org", "aggregate_subscription_by_org", "export_members_subscription_csv"], "classes": [], "methods": [{"name": "assign_subscription( subscription_in: SubscriptionCreate, db: Session = Depends(get_db), )", "description": "Creates a new subscription and assigns it to a member.", "scope": "", "scopeKind": ""}, {"name": "renew_subscription( subscription_id: int, new_end_date: date, db: Session = Depends(get_db), )", "description": "Renews an existing subscription by updating its end date and status.", "scope": "", "scopeKind": ""}, {"name": "cancel_subscription( subscription_id: int, db: Session = Depends(get_db) )", "description": "Cancels a subscription by setting its status to 'cancelled'.", "scope": "", "scopeKind": ""}, {"name": "list_subscriptions_by_member( member_id: int, db: Session = Depends(get_db) )", "description": "Retrieves all subscriptions associated with a specific member.", "scope": "", "scopeKind": ""}, {"name": "list_subscriptions_by_org( org_id: int, status: Optional[str] = Query(None, description=\"Filter by status\"), db: Session = Depends(get_db) )", "description": "Retrieves subscriptions associated with an organization, optionally filtered by status.", "scope": "", "scopeKind": ""}, {"name": "aggregate_subscription_by_org( org_id: int, db: Session = Depends(get_db) )", "description": "Provides aggregated statistics about subscriptions for an organization.", "scope": "", "scopeKind": ""}, {"name": "export_members_subscription_csv( org_id: int, status: str = Query(..., description=\"Subscription status to export (active, overdue, cancelled, pending)\"), format: str = Query(\"csv\", description=\"Export format: csv or xlsx\"), db: Session = Depends(get_db) )", "description": "Exports subscription and payment data for members of an organization as CSV or XLSX.", "scope": "", "scopeKind": ""}], "calls": ["db.query", "db.add", "db.commit", "db.refresh", "db.query().filter()", "db.query().join()", "db.query().count()", "db.query().all()"], "search-terms": ["FastAPI subscription endpoints", "assign_subscription", "renew_subscription", "cancel_subscription", "list_subscriptions", "aggregate_subscription_stats", "export_subscriptions_csv", "API router", "Subscription management"], "state": 2, "file_id": 10, "knowledge_revision": 26, "git_revision": "", "ctags": [{"_type": "tag", "name": "aggregate_subscription_by_org", "path": "/home/kavia/workspace/code-generation/membersphere-platform-22477-22482/membership_backend/src/api/subscriptions.py", "pattern": "/^def aggregate_subscription_by_org($/", "language": "Python", "kind": "function", "signature": "( org_id: int, db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "assign_subscription", "path": "/home/kavia/workspace/code-generation/membersphere-platform-22477-22482/membership_backend/src/api/subscriptions.py", "pattern": "/^def assign_subscription($/", "language": "Python", "kind": "function", "signature": "( subscription_in: SubscriptionCreate, db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "cancel_subscription", "path": "/home/kavia/workspace/code-generation/membersphere-platform-22477-22482/membership_backend/src/api/subscriptions.py", "pattern": "/^def cancel_subscription($/", "language": "Python", "kind": "function", "signature": "( subscription_id: int, db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "export_members_subscription_csv", "path": "/home/kavia/workspace/code-generation/membersphere-platform-22477-22482/membership_backend/src/api/subscriptions.py", "pattern": "/^def export_members_subscription_csv($/", "language": "Python", "kind": "function", "signature": "( org_id: int, status: str = Query(..., description=\"Subscription status to export (active, overdue, cancelled, pending)\"), format: str = Query(\"csv\", description=\"Export format: csv or xlsx\"), db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "list_subscriptions_by_member", "path": "/home/kavia/workspace/code-generation/membersphere-platform-22477-22482/membership_backend/src/api/subscriptions.py", "pattern": "/^def list_subscriptions_by_member($/", "language": "Python", "kind": "function", "signature": "( member_id: int, db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "list_subscriptions_by_org", "path": "/home/kavia/workspace/code-generation/membersphere-platform-22477-22482/membership_backend/src/api/subscriptions.py", "pattern": "/^def list_subscriptions_by_org($/", "language": "Python", "kind": "function", "signature": "( org_id: int, status: Optional[str] = Query(None, description=\"Filter by status\"), db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "renew_subscription", "path": "/home/kavia/workspace/code-generation/membersphere-platform-22477-22482/membership_backend/src/api/subscriptions.py", "pattern": "/^def renew_subscription($/", "language": "Python", "kind": "function", "signature": "( subscription_id: int, new_end_date: date, db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/membersphere-platform-22477-22482/membership_backend/src/api/subscriptions.py", "pattern": "/^router = APIRouter(prefix=\"\\/subscriptions\", tags=[\"Subscriptions\"])$/", "language": "Python", "kind": "variable"}], "hash": "5a41406681c5b5b56f9edbcd138c3632", "format-version": 4, "code-base-name": "membership_backend", "filename": "membership_backend/src/api/subscriptions.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/subscriptions\", tags=[\"Subscriptions\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"26": ""}]}